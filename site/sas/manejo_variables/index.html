<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="Francisco Ariel Vázquez Chávez">
    <link rel="canonical" href="https://FranciscoAriel.github.io/site/sas/manejo_variables/">
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Manipulación de bases - Estadística desde Cero</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Manejo de bases", url: "#_top", children: [
              {title: "Creando variables", url: "#creando-variables" },
              {title: "Filtrado de datos", url: "#filtrado-de-datos" },
              {title: "Ciclos", url: "#ciclos" },
              {title: "Arreglos", url: "#arreglos" },
              {title: "Manipulaci\u00f3n y transformaci\u00f3n de bases", url: "#manipulacion-y-transformacion-de-bases" },
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../reportes/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../reportes/" class="btn btn-xs btn-link">
        Elaboración de reportes
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../basico_sas/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../basico_sas/" class="btn btn-xs btn-link">
        Lectura y escritura de datos
      </a>
    </div>
    
  </div>

    

    <h1 id="manejo-de-bases">Manejo de bases<a class="headerlink" href="#manejo-de-bases" title="Permanent link">&para;</a></h1>
<p>En esta sección se presentan temas más profundos acerca del procesamiento de datos.
Se explorarán distintas formas de manejar bases mediante uso de variables, seleccionar observaciones así como el uso de ciclos y arreglos que nos permitan tener un mayor control de la información que se tenga.</p>
<p>Primero se verá la forma de crear variables con el fin de realizar cálculos posteriores, estas variables pueden ser usadas incluso para crear varios datasets, crear contadores o acumuladores, entre otras. También se conocerán técnicas de selección de observaciones con el fin de manipular mejor las bases.</p>
<p>Después se explorará un poco el tema del ordenamiento con el fin de crear ya sea grupos o realizar otras operciones como uniones, transposiciones entre otras.</p>
<p>Antes de continuar con temas mas complejos, es importante comprender de forma general el funcionamiento del paso DATA.</p>
<p>Para una explicación más detallada consulte <a href="https://support.sas.com/documentation/cdl/en/basess/58133/HTML/default/viewer.htm#a001290590.htm">Cómo funciona el paso DATA</a>.</p>
<p>El paso DATA tiene dos fases:</p>
<ul>
<li>Fase de compilación</li>
<li>Fase de ejecución</li>
</ul>
<p>A continuación se describir´n de forma breve estas fases.</p>
<p>Durante la fase de compilación, SAS revisa la sintaxis y si es correcta, se manda a código máquina en dondese procesa el código y se generan los siguientes objetos:</p>
<ul>
<li><strong>Memoria de entrada</strong>. Es un lugar en la memoria donde SAS lee registros de un archivo de texto cuando el programa se ejecute.</li>
<li><strong>Vector de datos del programa</strong>. Es un lugar en la memoria donde SAS construye un conjunto de datos, una observación a la vez.</li>
<li><strong>Porción descriptora</strong>. Es la información general del dataset como el nombre de la base y los atributos de las variables a crear.</li>
</ul>
<p>La memoria de entrada solo aplica en el caso en que se lean archivos externos. En este caso, los datos se leen de la memoria de entrada al vector de datos del programa.</p>
<p>El vector de datos del programa (VDP) es importante porque en éste se realizarían los cálculos de las sentencias de SAS o funciones. Contiene el nombre de todas las variables declaradas o inicializadas. Es como un paso intermedio entre lo que se lee y calcula con lo que se se escribe al dataset. Al inicio de cada iteración los valores en el VDP son iniciados con valor missing y son llenados según lea o ejecuten sentencias.</p>
<p>Durante la fase de compilación tambien se crean dos variables auxiliares en el VDP que no se escribirán en el dataset: <code>_N_</code> y <code>_ERROR_</code>. La primera cuenta el número de veces que el paso DATA itera y la segunda registra si hubo algún problema en la fase de ejecución.</p>
<p>Una vez concluída esta etapa, se procede a la siguiente fase.</p>
<p>En la fase de ejecución se realizan las siguientes acciones:</p>
<ol>
<li>Se leen las observaciones del VDP.</li>
<li>Se ejecutan las sentencias (cálculo de variables).</li>
<li>Se escriben al dataset.</li>
<li>La variables en el VDP son reiniciadas y se colocan valores missing.</li>
</ol>
<p>Debido a que es un procesos repetitivo, SAS realiza los pasos mencionados tantas veces como observaciones haya en el archivo externo o dataset leído.</p>
<p>El proceso termina cuando ya no hay registros que leer y en ese momento el dataset es cerrado y se concluye el paso DATA.</p>
<h2 id="creando-variables">Creando variables<a class="headerlink" href="#creando-variables" title="Permanent link">&para;</a></h2>
<p>Hasta ahora solo conocíamos las sentencias <code>ATTRIB</code>, <code>LENGTH</code> y <code>FORMAT</code> para declarar o iniciar variables. Otra forma de crearlas es mediante la asignación de variables de la siguiente forma:</p>
<blockquote>
<p>variable = <em>expresión sas</em>;</p>
</blockquote>
<p>Esta sentencia se conoce como <em>sentencias de asignación</em>. Su función es evaluar y almacenar el resultado en alguna variable que está al lado izquierdo del signo <code>=</code>.</p>
<p>Una forma muy común de crear variables es mediante el uso de operadores matemáticos. La siguiente tabla muestra algunos de los operadores aritméticos en SAS. Para una referencia consulte <a href="https://documentation.sas.com/doc/en/lrcon/9.4/p00iah2thp63bmn1lt20esag14lh.htm#n1feyypdf6czp4n15pthf5lafmlf">Operadores SAS en expresiones</a> y <a href="https://documentation.sas.com/doc/en/lrcon/9.4/p1fjvn4giid9e0n1v0wcn4ibwbzi.htm">Funciones SAS en expresiones</a>.</p>
<table>
<thead>
<tr>
<th>Símbolo</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>+</code></td>
<td>Adición</td>
<td><code>fecha + 1</code></td>
</tr>
<tr>
<td><code>-</code></td>
<td>Sustracción</td>
<td><code>fecha - 7</code></td>
</tr>
<tr>
<td><code>*</code></td>
<td>Multiplicación</td>
<td><code>height * 2.54</code></td>
</tr>
<tr>
<td><code>/</code></td>
<td>División</td>
<td><code>suma / total</code></td>
</tr>
<tr>
<td><code>**</code></td>
<td>Exponenciación</td>
<td><code>metros ** 2</code></td>
</tr>
</tbody>
</table>
<p>Considere las siguientes sentencias:</p>
<pre><code class="sas">fecha = '10Jun20'd;
version = 1;
status = &quot;ok&quot;;
altura = height * 2.54;
nombre2 = SUBSTR(name,1,3);
</code></pre>

<p>En esas sentencias se han creado las variables simplemente asignando un valor o una expresión SAS.</p>
<p>Las primeras tres sentencias crearían variables de tipo numérico; la expresión <code>'10Jun20'd</code> es interpretada por sas como un valor numérico.</p>
<p>La cuarta sentencia realiza una multiplicación de una variable por una constante.</p>
<p>Finalmente, la quinta aplica una función a una variable de tipo caracter que extraerá los 3 primeros caracteres de una cadena. Para conocer un poco más vea la <a href="#funciones-y-llamadas-a-rutinas">sección</a>.</p>
<p>A continuación se presentan algunas variables que serán muy útiles.</p>
<h3 id="variables-acumuladoras-y-contadoras">Variables acumuladoras y contadoras<a class="headerlink" href="#variables-acumuladoras-y-contadoras" title="Permanent link">&para;</a></h3>
<p>En SAS es posible crear una variable que sume o vaya acumulando.</p>
<p>Considere la siguiente tabla donde se representan la información de los empleados de una compañía. Se desea obtener un acumulado de las ventas de los empleados y un contador para tener en cuenta el número de empleados.</p>
<p><img alt="Datos del ejemplo" src="../img/ejemplo1.png" /></p>
<p>El siguiente código muestra la forma de crear el acumulador y el contador de forma muy básica.</p>
<pre><code class="sas">DATA ventas_au2;
    SET ventas_au;
    contador = _N_;
    salario_acum + salary;
RUN;
</code></pre>

<p>La tercer línea guarda el número de veces que se ha iterado, es decir el número de registros leídos. Debido a que la variable <code>_N_</code> es temporal y no se escribe en el dataset, se guarda en la variable <em>contador</em>.</p>
<p>En la cuarta se muestra cómo acumular en la variable <em>salario_acum</em>, en cada iteración se le suma la variable <em>salary</em> a la variable <em>salario_acum</em>. Esta sentencia es conocida como <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/lestmtsref/n1dfiqj146yi2cn1maeju9wo7ijs.htm">sentencia SUM</a>.</p>
<div class="admonition error">
<p class="admonition-title">Cuidado con el operador +</p>
<p>Se debe tener cuidado al usar el operador <code>+</code> debido a que si alguno de los operandos tiene un valor <em>missing</em>, el resultado sería <em>missing</em>. Se recomienda usar la <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/lefunctionsref/n0zxive1z1ctqin12w06c85jfigd.htm">función SUM</a> para evitar esos imprevistos.</p>
</div>
<p>Si se hubiese definido <code>salario_acum = salario_acum + salary</code>en la línea 4, el resultado en cada observacion nos resultaría un valor <em>missing</em>. Como se mencionó previamente, durante la fase de compilación los valores en el VDP se reinician a valor <em>missing</em> causando que el resultado en dicha expresión sea <em>missing</em>.</p>
<p>Para evitar que eso ocurra, se puede usar la sentencia <code>RETAIN</code> con el fin de que SAS conserve el valor en cada iteración.</p>
<pre><code class="sas">DATA ventas_au2;
    SET ventas_au;
    RETAIN salario_acum2 0;
    salario_acum2 = salario_acum2 + salary; 
RUN;
</code></pre>

<p>En la línea 3 se pide que SAS retenga la variable <em>salario_acum2</em> en cada iteración y que su valor inicial sea 0. De esta manera se podría sumar de manera normal. Consulte la <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/lestmtsref/p0t2ac0tfzcgbjn112mu96hkgg9o.htm">sentencia RETAIN</a> para más información.</p>
<h3 id="funciones-y-llamadas-a-rutinas">Funciones y llamadas a rutinas<a class="headerlink" href="#funciones-y-llamadas-a-rutinas" title="Permanent link">&para;</a></h3>
<p>Ya habíamos mencionado que las funciones podían usarse para crear variables, sin embargo ahora se profundizará un poco más en su uso.</p>
<p>Las funciones permiten realizar cálculos y operaciones en ocasiones muy complejas, éstas pueden  requerir de cierta información o argumentos con el fin de traer el resultado. Generalmente son almacenadas en variables, aunque pudieran usarse como una expresión en una sentencia <code>WHERE</code> o <code>IF</code>. Su sintaxis es la siguiente:</p>
<blockquote>
<p>&lt;<em>variable =</em>&gt; funcion(&lt;<em>argumento1,argumento2</em>,&hellip;,<em>argumenton</em>&gt;);</p>
</blockquote>
<p>Las llamadas a rutinas, en cambio en lugar de arrojar un resultado, realizan una acción u operacion. Su sintaxis es la siguiente:</p>
<blockquote>
<p><strong>CALL</strong> rutina(&lt;<em>argumento1,argumento2</em>,&hellip;,<em>argumenton</em>&gt;);</p>
</blockquote>
<p>Para más información acerca de las llamadas a rutinas y funciones consulte <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/lefunctionsref/p0n609kcs3dmqfn1jrhi0fiitpwk.htm">Funciones SAS y rutinas</a>.</p>
<h2 id="filtrado-de-datos">Filtrado de datos<a class="headerlink" href="#filtrado-de-datos" title="Permanent link">&para;</a></h2>
<p>En ocasiones, se tiene una basta cantidad de datos y solo nos interesa un subconjunto de estos. Para eso se pueden elegir observaciones de un dataset con la sentencia <code>WHERE</code>.</p>
<div class="admonition caution">
<p class="admonition-title">WHERE vs IF</p>
<p>No debe confundirse la sentencia <code>WHERE</code> con <code>IF</code>. La sentencia <code>IF</code> trabaja con observaciones <em>después</em> de ser leídas en el VDP, mietras que <code>WHERE</code> selecciona las observaciones <em>antes</em> de pasar al VDP.</p>
</div>
<p>La sintaxis es la siguiente:</p>
<blockquote>
<p>WHERE <em>expresión</em>;</p>
</blockquote>
<p>donde <em>expresión</em> es una condición a evaluar, vea la sección <a href="/site/sas/basico_sas/index.html#seleccion-de-observaciones">selección de observaciones</a> para una referencia de los operadores lógicos y booleanos. La siguiente tabla muestra expresiones válidas para la sentencia <code>WHERE</code></p>
<table>
<thead>
<tr>
<th>Operador</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BETWEEN - AND</code></td>
<td>Un rango inclusivo</td>
<td><code>WHERE age BETWEEN 12 AND 15;</code></td>
</tr>
<tr>
<td><code>?</code> o <code>CONTAINS</code></td>
<td>Una cadena de caracteres</td>
<td><code>WHERE name ? "Ja";</code></td>
</tr>
<tr>
<td><code>IS NULL</code> o <code>IS MISSING</code></td>
<td>Valores faltantes</td>
<td><code>WHERE volumen IS NULL;</code></td>
</tr>
<tr>
<td><code>LIKE</code></td>
<td>Combinación de patrones</td>
<td><code>WHERE name LIKE "J%";</code></td>
</tr>
<tr>
<td><code>=*</code></td>
<td>Suena como (Sólo palabras en inglés)</td>
<td><code>WHERE name =* "jeims";</code></td>
</tr>
<tr>
<td><code>SAME - AND</code></td>
<td>Agrega cláusulas a una sentencia <code>WHERE</code> existente</td>
<td><code>WHERE sex = "F"; WHERE SAME AND age &gt;= 13;</code></td>
</tr>
</tbody>
</table>
<p>En el siguiente ejemplo se muestra el filtrado usando la sentencia <code>WHERE</code> usando los datos de <a href="../src/datos_covid_web.sas">covid</a> para tener sólo la información de México.</p>
<pre><code class="sas">DATA mexico;
    SET covid;
    WHERE iso_code EQ &quot;MEX&quot;;
RUN;
</code></pre>

<p>El log muestra el siguiente mensaje:</p>
<blockquote>
<p>NOTE: There were 609 observations read from the data set WORK.COVID.</p>
<p>WHERE iso_code=&rsquo;MEX&rsquo;</p>
</blockquote>
<p>Si se hubiese usado la sentencia <code>IF</code> en lugar de <code>WHERE</code> el resultado hubiera sido el siguiente:</p>
<blockquote>
<p>NOTE: There were 113406 observations read from the data set WORK.COVID.</p>
<p>NOTE: The data set WORK.MEXICO has 609 observations and 60 variables.</p>
</blockquote>
<p>El ejemplo anterior muestra las diferencias entre las sentencias <code>IF</code> y <code>WHERE</code>.</p>
<div class="admonition tip">
<p class="admonition-title"><code>WHERE</code> como opción de dataset</p>
<p>Es posible usar la opción <code>WHERE =</code> para filtrar observaciones para un dataset especificado, esto es útil cuando se leen más de un dataset. Vea la <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/ledsoptsref/p0ny9o8t8hc5zen1qn3ft9dhtsxx.htm">documentación</a> para más información.</p>
</div>
<h3 id="sentencias-condicionales">Sentencias condicionales<a class="headerlink" href="#sentencias-condicionales" title="Permanent link">&para;</a></h3>
<p>Anteriormente se había usado la sentencia <code>IF</code> para seleccionar variables, ahora se usará en conjunto con la palabra <code>THEN</code> con el fin de que realice una acción. Esta sentencia se conoce como sentencia <strong>IF-ELSE</strong>.</p>
<p>La sintaxis es la siguiente:</p>
<blockquote>
<p>IF <em>expresión</em> THEN <em>acción1</em>; ELSE <em>acción2</em>;</p>
</blockquote>
<p>El siguiente ejemplo muestra cómo crear una variable a partir de ciertos valores.</p>
<pre><code class="sas">DATA clase;
    SET SASHELP.CLASS;
    LENGTH sexo $8;
    IF sex = &quot;F&quot; THEN sexo = &quot;Mujer&quot;;
    ELSE sexo = &quot;Hombre&quot;;
RUN;
</code></pre>

<p>Note que la sentencia <code>IF-ELSE</code> solo permite una acción a la vez. Para realizar más de una acción se debe usar el bloque <code>DO</code>. Consulte la <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/lestmtsref/n0el0y2a02ab1ln1pks3gbac1en3.htm">documentación</a> para más información.</p>
<pre><code class="sas">DATA clase;
    SET SASHELP.CLASS;
    sexo = &quot;Hombre&quot;;
    genero = &quot;Masculino&quot;;
    IF sex = &quot;F&quot; THEN DO;
        sexo = &quot;Mujer&quot;;
        genero = &quot;Femenino&quot;;
    END;
RUN;
</code></pre>

<p>Estas sentencias pueden anidarse para formar sentencias más complejas, por ejemplo.</p>
<pre><code class="sas">DATA clase;
   SET SASHELP.CLASS;
   LENGTH escuela $12.;
   IF age LE 12 THEN escuela = &quot;Primaria&quot;;
      ELSE IF age GE 16 THEN escuela = &quot;Preparatoria&quot;;
   ELSE escuela = &quot;Secundaria&quot;;
RUN;
</code></pre>

<div class="admonition caution">
<p class="admonition-title">Cuidado con las estructuras anidadas</p>
<p>Se debe tener cuidado al usar sentencias anidadas ya que deben ser cerradas correctamente. De no ser así, se pueden cometer errores.</p>
</div>
<p>Otra forma de crear sentencias condicionales es mediante el uso de la sentencia <code>SELECT</code>. Consulte la <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/lestmtsref/p09213s9jc2t99n1vx0omk2rh9ps.htm">ayuda</a> para más información.</p>
<pre><code class="sas">DATA clase;
   SET SASHELP.CLASS;
   LENGTH escuela $12.;
   SELECT;
      WHEN (age LE 12) escuela = &quot;Primaria&quot;;
      WHEN (age GE 16) escuela = &quot;Preparatoria&quot;;
      OTHERWISE escuela = &quot;Secundaria&quot;;
   END;
RUN;
</code></pre>

<div class="admonition note">
<p class="admonition-title">No confundirse</p>
<p>Esta sentencia no debe confundirse con la sentencia <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/sqlproc/p0hwg3z33gllron184mzdoqwpe3j.htm">SELECT de SQL</a>. Para hacer algo similar en SQL, revise este <a href="https://vazquez-chavez-francisco-ariel.gitbook.io/notas/consultas-basicas#creacion-de-nuevas-columnas">ejemplo</a>.</p>
</div>
<h2 id="ciclos">Ciclos<a class="headerlink" href="#ciclos" title="Permanent link">&para;</a></h2>
<p>Al igual que otros lenguajes de programación SAS dispone de sentencias de ciclo repetitivos. Estas sentencias son útiles para simulación de datos o para ingreso de datos repetitivos.</p>
<h3 id="do-iterativo">DO iterativo<a class="headerlink" href="#do-iterativo" title="Permanent link">&para;</a></h3>
<p>Es el equivalente al FOR de algunos programas</p>
<p>La sintaxis es la siguiente:</p>
<blockquote>
<p>DO <em>variable-índice</em>=<em>lista</em>;</p>
<p><em>sentencias sas</em>;</p>
<p>END;</p>
</blockquote>
<p>donde <em>lista</em> puede ser un rango de valores consecutivos (indicando inicio, fin e incremento) o una lista de valores. Consulte la <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/lestmtsref/p1cydk5fq0u4bfn1xfbjt7w1c7lu.htm">documentación</a> para una mayor referencia.</p>
<p>El siguiente ejemplo muestra su uso</p>
<pre><code class="sas">DATA ejemplo;
    INPUT color :$8.;
    DO i = 1,3,5;
        j = _N_;
        OUTPUT;
    END;
    DATALINES;
    azul
    verde
    rojo
    amarillo
    ;
RUN;
</code></pre>

<p>El dataset anterior lee los datos señalados por la sentencia <code>INPUT</code>. En la primer iteración (es decir,cuando lee &ldquo;azul&rdquo;) entra al ciclo DO y se escribe en el VDP el primer valor de la secuencia (i). La instrucción <code>OUTPUT</code> indica que se debe escribir ese valor al DATASET. Esto se repite para los valores restantes (3 y 5). Note que aún estamos en la primer iteración (es decir <code>_N_ = 1</code>).</p>
<p>Cuando se terminan los valores del ciclo DO, se lee la segunda observación del DATALINES y se repite lo mismo.</p>
<p>Esta estructura también es útil para leer datos consecutivos y hacer secuencias, por ejemplo</p>
<pre><code class="sas">DATA colores;
    DO i = 1 to 4;
        INPUT color :$8. @@;
        j = _N_;
        OUTPUT;
    END;
    DATALINES;
    azul verde rojo amarillo
    verde rojo amarillo azul
    rojo amarillo azul verde
    amarillo azul verde rojo
    ;
RUN;
</code></pre>

<p>Note que derante la primer iteración (<code>_N_ = 1</code>) se inicia el ciclo <code>DO</code> con valores del 1 al 4. Una vez dentro del ciclo, SAS empezará a leer los 4 primeros valores del <code>DATALINES</code> y los escribirá al dataset. Esto se repetirá hasta que ya no haya observaciones por leer.</p>
<h4 id="do-continue">DO CONTINUE<a class="headerlink" href="#do-continue" title="Permanent link">&para;</a></h4>
<p>SAS tiene una sentencia especial que permite, dentro de un ciclo, saltar al siguiente valor de la variable índice. Esto puede ser útil para prevenir que otras sentencias se ejecuten.</p>
<p>El siguiente ejemplo muestra su uso.</p>
<pre><code class="sas">DATA colores;
    DO i = 1 to 4;
        INPUT color :$8. @@;
        j = _N_;
        IF color IN (&quot;blanco&quot; &quot;negro&quot;) THEN CONTINUE;
        OUTPUT;
    END;
    DATALINES;
    negro azul rojo amarillo
    azul verde rojo amarillo
    verde rojo amarillo azul
    rojo amarillo azul verde
    blanco azul rojo amarillo
    amarillo azul verde rojo
    ;
RUN;
</code></pre>

<p>El código anterior evita que en el dataset se ingresen los colores blanco o negro, ya que al cumplirse la condición no se ejecuta la sentencia <code>OUTPUT;</code>.</p>
<p>Consulte la <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/lestmtsref/n0vupy1vhs8gosn1tjd3zg8dtf76.htm">ayuda de SAS</a> para más información acerca de la sentencia <code>CONTINUE</code>.</p>
<h4 id="do-leave">DO LEAVE<a class="headerlink" href="#do-leave" title="Permanent link">&para;</a></h4>
<p>A diferencia de la sentencia <code>CONTINUE</code>, la sentencia <code>LEAVE</code> permite salir del ciclo <code>DO</code>.</p>
<p>El siguiente ejemplo muestra el uso de la sentencia <code>LEAVE</code>.</p>
<pre><code class="sas">DATA colores;
    DO i = 1 to 4;
        INPUT color :$8. @@;
        j = _N_;
        IF color IN (&quot;blanco&quot; &quot;negro&quot;) THEN LEAVE;
        OUTPUT;
    END;
    DATALINES;
    azul verde rojo amarillo
    verde rojo amarillo azul
    negro color1 color2 color3
    azul rojo amarillo verde
    rojo amarillo azul verde
    blanco color1 color2 color3
    azul rojo amarillo verde
    amarillo azul verde rojo
    ;
RUN;
</code></pre>

<p>En este caso, cuando se cumple la condición, sale del ciclo DO y esto implica que se lea la siguiente línea por lo que no se toma en cuenta los valores que hay en las líneas 3 y 6.</p>
<p>Consulte la sentencia <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/ds2ref/p1irdset32xggmn1c7dwqmthxvnd.htm">LEAVE</a> para más información.</p>
<h3 id="do-while">DO WHILE<a class="headerlink" href="#do-while" title="Permanent link">&para;</a></h3>
<h3 id="do-until">DO UNTIL<a class="headerlink" href="#do-until" title="Permanent link">&para;</a></h3>
<h2 id="arreglos">Arreglos<a class="headerlink" href="#arreglos" title="Permanent link">&para;</a></h2>
<h2 id="manipulacion-y-transformacion-de-bases">Manipulación y transformación de bases<a class="headerlink" href="#manipulacion-y-transformacion-de-bases" title="Permanent link">&para;</a></h2>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../reportes/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../reportes/" class="btn btn-xs btn-link">
        Elaboración de reportes
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../basico_sas/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../basico_sas/" class="btn btn-xs btn-link">
        Lectura y escritura de datos
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
      <p>
        <a href="https://github.com/FranciscoAriel/FranciscoAriel.github.io/blob/master/docs/sas/manejo_variables.md"><i class="fa fa-github"></i>
Edit on GitHub</a>
      </p><p>Copyright &copy; 2021 <br> <a href="https://github.com/FranciscoAriel">Francisco Vázquez</a></p>
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>